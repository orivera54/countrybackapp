scalar DateTime @scalar(class: "Nuwave\\Lighthouse\\Schema\\Types\\Scalars\\DateTime")

"Indicates what fields are available at the top level of a query operation."
type Query {
  "Find a single user by an identifying attribute."
  user(
    "Search by primary key."
    id: ID @eq @rules(apply: ["prohibits:email", "required_without:email"])

    "Search by email address."
    email: String @eq @rules(apply: ["prohibits:id", "required_without:id", "email"])
  ): User @find

  "List multiple users."
  users(
    "Filters by name. Accepts SQL LIKE wildcards `%` and `_`."
    name: String @where(operator: "like")
  ): [User!]! @paginate(defaultCount: 10)

  "Get top N countries by population density."
  topDenseCountries(limit: Int!, username: String!): [Country!]!
    @field(resolver: "App\\GraphQL\\Queries\\TopDenseCountriesQuery@resolve")

  "Get usage logs of the application."
  logs: [LogEntry!]!
    @field(resolver: "App\\GraphQL\\Queries\\LogUsageQuery@resolve")
}

"Account of a person who uses this application."
type User {
  id: ID!
  name: String!
  email: String!
  email_verified_at: DateTime
  created_at: DateTime!
  updated_at: DateTime!
}

"A country with demographic data."
type Country {
  name: String!
  area: Float!
  population: Int!
  density: Float!
}

"Log entry for each request to the topDenseCountries endpoint."
type LogEntry {
  id: ID!
  username: String!
  request_timestamp: DateTime!
  num_countries_returned: Int!
  countries_details: [Country!]!
}